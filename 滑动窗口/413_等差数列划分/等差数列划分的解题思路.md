# 等差数列划分

如果一个数列 **至少有三个元素** ，并且任意两个相邻元素之差相同，则称该数列为等差数列。

* 例如，`[1,3,5,7,9]`、`[7,7,7,7]` 和 `[3,-1,-5,-9]` 都是等差数列。

给你一个整数数组 `nums` ，返回数组 `nums` 中所有为等差数组的 **子数组** 个数。

**子数组** 是数组中的一个连续序列。



## 问题分析

**问题的核心是：**

* **等差数列的性质** ：如果数组中每两个相邻元素的差相同，那么这个数组就是等差数列。
* **滑动窗口的使用** ：由于子数组是连续的，我们可以使用滑动窗口技术来动态维护一个窗口，判断窗口内的元素是否构成等差数列。

**关键点：**

1. **连续子数组** ：子数组必须是数组中的一个连续序列，不能跳跃元素。
2. **子数组长度至少为 3** ：至少需要 3 个元素才能构成有效的等差数列。
3. **相邻元素的差相同** ：任意两个相邻元素的差相同，是等差数列成立的必要条件。



## 滑动窗口解法

### 滑动窗口的核心思路：

1. **定义窗口范围** ：通过使用两个指针 `left` 和 `right`，表示滑动窗口的左右边界。随着 `right` 指针的移动，扩展窗口，动态判断窗口内的子数组是否为等差数列。
2. **动态调整窗口** ：

* 如果 `right` 指向的当前元素和前一个元素的差与窗口内的前几个元素的差相同，那么当前窗口内的元素构成等差数列，可以继续扩展窗口。
* 如果窗口中的元素不满足等差数列的条件，则通过移动 `left` 指针来重置窗口，开始新的判断。

1. **累积结果** ：每次我们找到一个长度大于等于 3 的等差数列时，更新计数，并将当前有效的等差子数组个数累积到结果中。

### 滑动窗口解法步骤：

1. **初始化** ：我们定义两个指针 `left` 和 `right`，用来构成窗口，并使用一个变量 `count` 来记录等差子数组的个数。
2. **遍历数组** ：从第二个元素开始（即从 `right = 1` 开始），检查当前元素和前一个元素的差值是否等于窗口内前两个元素的差值。
3. **动态扩展窗口** ：

* 如果当前窗口内的差值相同，继续扩展窗口，并累加找到的等差子数组个数。
* 如果不相同，重置窗口，重新开始判断。

1. **更新结果** ：每次窗口扩展时，找到的等差子数组的个数会随着窗口长度的增加而增加。
